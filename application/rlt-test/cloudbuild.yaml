steps:
  # build the container image
- name: "gcr.io/cloud-builders/docker"
  dir: ./application/rlt-test/
  args: ["build", "-t", "gcr.io/$PROJECT_ID/rtl-test", "."]
  # push container image
 - name: "gcr.io/cloud-builders/docker"
   args: ["push", "gcr.io/$PROJECT_ID/rtl-test"]
#   # deploy container image to GKE
    # Configure a kubectl workspace for this project
# - name: gcr.io/cloud-builders/kubectl
#   args:
#     - cluster-info
#   env:
#     - CLOUDSDK_COMPUTE_REGION=$_CUSTOM_REGION
#     - CLOUDSDK_CONTAINER_CLUSTER=$_CUSTOM_CLUSTER
#     - KUBECONFIG=/workspace/.kube/config
#   # Deploy with Helm
#   - name: gcr.io/$PROJECT_ID/helm
#     args:
#       - upgrade
#       - -i
#       - my-app
#       - ./kubernetes
#       - --set
#       - image.repository=gcr.io/$PROJECT_ID/rtl-test
#       - -f
#       - ./charts/rlt-test/values.yaml
#     env:
#       - KUBECONFIG=/workspace/.kube/config
#       - TILLERLESS=false
#       - TILLER_NAMESPACE=kube-system
# substitutions:
#   _CUSTOM_REGION: us-central1
#   _CUSTOM_CLUSTER: my-vpc-native-cluster